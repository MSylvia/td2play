/**
 * Visually testing if text output is actually working and not corrupting anything
 */
#include <TinyScreen.h>
#include <SPI.h>
#include <Wire.h>
#include "lib_font_virtualdj.h"
#include "lib_RenderBuffer.h"
#include "lib_StringBuffer.h"

TinyScreen display = TinyScreen(0);
RenderBuffer buffer;

void setup() {
  Wire.begin();
  SerialUSB.print("hello!");
  display.begin();
  display.setFlip(0);
  display.setBrightness(8);
  display.setBitDepth(1);
}
const unsigned char _image_tex_16x16_data[] PROGMEM = {
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x21,0x04,0x7b,0xef,0x73,0x8e,0x00,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x42,0x28,0xa5,0x34,0x84,0x10,0x7b,0xcf,0x62,0x65,0x51,0x60,0x08,0x40,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x51,0xa1,0x73,0xae,0x83,0xf0,0x4a,0x48,0x39,0xe8,0x9c,0x4f,0xe4,0x42,0xf4,0x60,0x92,0x80,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x30,0xe0,0xbb,0x60,0xfc,0x60,0xb3,0xa4,0x7b,0x8d,0x5a,0xeb,0x42,0x07,0x52,0x05,0xab,0x01,0x9a,0xa0,0x9a,0xa0,0x20,0x80,0x00,0x00,
  0x00,0x00,0x10,0x40,0xbb,0x60,0xf4,0x40,0xfc,0x40,0xfc,0x60,0xfc,0x80,0xec,0x20,0xc3,0xa2,0xd3,0xa0,0x71,0xe0,0x82,0x20,0x71,0xe0,0x31,0x01,0x20,0xe3,0x00,0x00,
  0x29,0x66,0x94,0x0c,0xfc,0x80,0xfc,0x40,0xf4,0x20,0xfc,0x40,0xfc,0x60,0xcb,0x80,0xc3,0x60,0xbb,0x40,0x8a,0x40,0x39,0x00,0x28,0xc1,0x20,0xe2,0x7b,0xcf,0xad,0x75,
  0xe7,0x3c,0xd6,0x57,0xcb,0x80,0xfc,0x80,0xfc,0x60,0xf4,0x20,0xec,0x00,0xc3,0x40,0xc3,0x60,0x9a,0xa0,0x30,0xe0,0x28,0xc0,0x20,0xc1,0x18,0xe3,0x42,0x08,0xe7,0x1b,
  0xdf,0x1c,0xde,0xdb,0x93,0xed,0xab,0x00,0xfc,0x80,0xfc,0x80,0xf4,0x60,0xec,0x60,0x8a,0x80,0x20,0xc1,0x20,0xa0,0x18,0xc2,0x18,0xe3,0x31,0x86,0xc6,0x18,0xe6,0xfc,
  0x6b,0x2d,0xd6,0xbb,0xbd,0xd7,0x39,0x83,0x8a,0x80,0xbb,0x20,0xa2,0xe0,0x61,0xc0,0x28,0xc1,0x20,0xe1,0x18,0xc3,0x21,0x04,0x29,0x65,0xc5,0xf8,0xde,0xfc,0xe7,0x1c,
  0x00,0x00,0x7c,0x0f,0xce,0x99,0xa5,0x34,0x39,0x85,0x30,0xc0,0x30,0xc0,0x28,0xc0,0x28,0xc1,0x18,0xc2,0x21,0x04,0x39,0xc7,0xad,0x55,0xb5,0x96,0xe7,0x1c,0xe7,0x1c,
  0x00,0x00,0x00,0x00,0x94,0xb2,0xce,0x79,0xad,0x75,0x31,0xa6,0x20,0xc2,0x20,0xc1,0x18,0xc2,0x18,0xe3,0x42,0x28,0xce,0x39,0xde,0xfb,0xe7,0x1c,0xe7,0x1c,0xbd,0xd7,
  0x00,0x00,0x00,0x00,0x00,0x41,0xad,0x75,0xd6,0xba,0xbd,0xd7,0x5a,0xeb,0x39,0xa6,0x21,0x04,0x4a,0x69,0xce,0x79,0xde,0xfb,0xe6,0xfc,0xe7,0x1c,0xde,0xdb,0x21,0x24,
  0x00,0x00,0x00,0x00,0x00,0x00,0x10,0xa2,0xc6,0x18,0xde,0xfb,0xde,0xdb,0xd6,0xba,0xc6,0x38,0xde,0xdb,0xde,0xfb,0xe7,0x1c,0xdf,0x1b,0xe7,0x1c,0x63,0x0c,0x00,0x00,

};
Texture _tex((uint8_t*) _image_tex_16x16_data, TextureType::rgb565sram, 16,16, 0xffff);

void loop(void) {
    static unsigned int n = 0;
    buffer.drawRect(4,4,24,24)->sprite(&_tex);
    buffer.drawText("rgb-565 sram",2,52,RGB565(255,255,255), &virtualDJ_5ptFontInfo);

    buffer.flush(display);
}
